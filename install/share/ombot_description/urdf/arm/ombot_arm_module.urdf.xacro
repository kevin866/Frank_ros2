<?xml version="1.0"?>
<robot xmlns:xacro="http://wiki.ros.org/xacro">

  <!-- Bring in the arm’s building blocks -->
  <xacro:include filename="/home/frank/frank_ws/src/ombot_description/urdf/arm/materials.xacro"/>
  <xacro:include filename="/home/frank/frank_ws/src/ombot_description/urdf/arm/ombot_arm_description.urdf.xacro"/>
  <xacro:include filename="/home/frank/frank_ws/src/ombot_description/urdf/arm/ombot_arm.transmission.xacro"/>
  <xacro:include filename="/home/frank/frank_ws/src/ombot_description/urdf/arm/ombot_arm.ros2_control.xacro"/>

  <!-- 
    Macro to place/mount the arm on any parent link.
    params:
      parent        = link to mount onto (e.g., base_link)
      mount_xyz     = pose of arm base relative to parent (x y z)
      mount_rpy     = pose of arm base relative to parent (r p y)
      prefix        = optional name prefix (keeps names unique)
  -->
  <xacro:macro name="ombot_arm_module" params="parent:=base_link mount_xyz:='0 0 0.5' mount_rpy:='0 0 0' prefix:=''">

    <!-- Instantiate the arm geometry (this macro comes from your arm description file) -->
    <!-- If your ombot_description accepts a prefix, pass it. If it doesn’t, remove prefix=... -->
    <xacro:ombot_description/>

    <!-- FIXED JOINT: attach the arm’s base link to the chosen parent -->
    <!-- Replace '${prefix}link_1' with whatever the ROOT link of the arm actually is -->
    <joint name="arm_mount" type="fixed">
      <origin xyz="${mount_xyz}" rpy="${mount_rpy}"/>
      <parent link="${parent}"/>
      <child  link="link_1"/>
    </joint>

    <!-- (Optional) Call arm ros2_control builder, if it’s a macro.
         If ombot_arm.ros2_control.xacro defines a macro like 'ombot_arm_ros2_control',
         you can expose it here or call it in your top-level -->
    <!-- <xacro:ombot_arm_ros2_control name="${prefix}ombot_arm"/> -->

  </xacro:macro>

</robot>
